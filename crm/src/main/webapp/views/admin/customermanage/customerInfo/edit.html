#@layout()
#define main()
<div class="layui-card-header">
	编辑客户信息
</div>
<div class="layui-card-body">
	<form class="layui-form" action="/admin/customermanage/customerInfo/save">
	<input type="text" name="customerInfo.id" value="#(customerInfo.id)" style="display:none;">
		<div class="sttl">主要信息</div>
		<div class="layui-form-item">
			<div class="layui-inline theme-required">
				<label class="layui-form-label">客户名称</label>
				<input type="text" name="customerInfo.customer_name" value="#(customerInfo.customer_name)" lay-verify="required" autocomplete="off" class="layui-input" style="width: 250px;">
			</div>
			<div class="layui-inline">
				<label class="layui-form-label">集团名称</label>
				<div class="layui-input-inline">
					<select name="customerInfo.group_id" lay-filter="groupId">
						<option value=''>请选择</option>
						#for(group:groups)
						<option value='#(group.id)' #if(customerInfo.group_id==group.id)selected #end>#(group.group_name)</option>
						#end
					</select>
				</div>
			</div>
			<div class="layui-inline">
				<label class="layui-form-label">客户行业</label>
				<div class="layui-input-inline">
					<select name="customerInfo.customer_industry" lay-filter="customerIndustry">
						<option value=""></option>
						<option value="1" #if(customerInfo.customer_industry=="1")selected#end>金融业</option>
						<option value="2" #if(customerInfo.customer_industry=="2")selected#end>房地产</option>
						<option value="3" #if(customerInfo.customer_industry=="3")selected#end>商业服务</option>
						<option value="4" #if(customerInfo.customer_industry=="4")selected#end>贸易</option>
						<option value="5" #if(customerInfo.customer_industry=="5")selected#end>生产</option>
						<option value="6" #if(customerInfo.customer_industry=="6")selected#end>运输/物流</option>
						<option value="7" #if(customerInfo.customer_industry=="7")selected#end>服务业</option>
						<option value="8" #if(customerInfo.customer_industry=="8")selected#end>文化传媒</option>
						<option value="9" #if(customerInfo.customer_industry=="9")selected#end>政府</option>
						<option value="10" #if(customerInfo.customer_industry=="10")selected#end>其他</option>
					</select>
				</div>
			</div>
			<div class="layui-inline">
				<label class="layui-form-label">公司性质</label>
				<div class="layui-input-inline">
					<input name="customerInfo.company_nature" #if(customerInfo.company_nature=="合资")checked=checked#end value="合资" title="合资" type="radio">
					<input name="customerInfo.company_nature" #if(customerInfo.company_nature=="国企")checked=checked#end value="国企" title="国企" type="radio">
					<input name="customerInfo.company_nature" #if(customerInfo.company_nature=="民营")checked=checked#end value="民营" title="民营" type="radio">
				</div>
			</div>
			<div class="layui-inline">
				<label class="layui-form-label">客户证件类型</label>
				<div class="layui-input-inline">
					<select name="customerInfo.cert_type" lay-filter="certType">
						<option value=""></option>
						<option value="1" #if(customerInfo.cert_type=="1")selected#end>营业执照</option>
						<option value="2" #if(customerInfo.cert_type=="2")selected#end>税务登记证</option>
						<option value="3" #if(customerInfo.cert_type=="3")selected#end>组织机构代码证</option>
					</select>
				</div>
			</div>
			<div class="layui-inline">
				<label class="layui-form-label">证件号码</label>
				<input type="text" name="customerInfo.cert_no" value="#(customerInfo.cert_no)" autocomplete="off" class="layui-input" style="width: 250px;">
			</div>
			<!-- <div class="layui-inline">
				<label class="layui-form-label">年营业额</label>
				<div class="layui-input-inline">
					<select name="interest" lay-filter="NYYE">
						<option value=""></option>
						<option value="0">写作</option>
						<option value="1" selected="">阅读</option>
						<option value="2">游戏</option>
						<option value="3">音乐</option>
						<option value="4">旅行</option>
					</select>
				</div>
			</div> -->
			<!-- <div class="layui-inline">
				<label class="layui-form-label">评分</label>
				<div class="layui-input-block">
					<input name="star" value="一星" title="一星" type="radio">
					<input name="star" value="二星" title="二星" type="radio">
					<input name="star" value="三星" title="三星" type="radio">
				</div>
			</div> -->
			<div class="layui-block">
				<label class="layui-form-label">客户地址</label>
				<div class="layui-input-inline">
					<select name="provinceId" lay-filter="province">
						<option value="">请选择</option>
                      #for(root:roots)
                      <option value="#(root.id)" #if(province.id==root.id)selected#end >#(root.name)</option>
                      #end
					</select>
				</div>
				<div class="layui-input-inline">
					<select name="cityId" lay-filter="city">
                      <option></option>
                      <option value="#(city.id)" #if(city.id!=null)selected#end >#(city.name)</option>
                   </select>
				</div>
				<div class="layui-input-inline">
					 <select name="areaId" lay-filter="area">
                      <option></option>
                      <option value="#(area.id)" #if(area.id!=null)selected#end >#(area.name)</option>
                   </select>
				</div>
				<div class="layui-input-inline">
					<input type="text" name="customerInfo.stress" value="#(customerInfo.stress)" autocomplete="off" placeholder="详细街道" class="layui-input">
				</div>
			</div>
		</div>
		<div class="sttl">附加信息</div>
		<div class="layui-form-item layui-form-text">
			<label class="layui-form-label">备注</label>
			<div class="layui-input-block" style="margin-left: 118px;">
				<textarea name='customerInfo.remark' placeholder="请输入内容" class="layui-textarea">#(customerInfo.remark)</textarea>
			</div>
		</div>
		<div>
			<button class="layui-btn" lay-submit lay-filter="save">保存</button>
			<button class="layui-btn layui-btn-primary" id="backBtn">返回</button>
		</div>
</div>

</form>
</div>
<script type="text/javascript">
	// 			editor.customConfig.onchange = function(html) {
	// 				// 监控变化，同步更新到 textarea
	// 				$("#introduction").val(html)
	// 			}
	// 			editor.create();

	layui.use(['form', 'layer', 'layedit'], function() {
		var form = layui.form,
			layer = layui.layer,
			layedit = layui.layedit,
			$ = layui.$;
		//监听提交
		form.on('submit(save)', function(data) {
			$.post($(".layui-form").attr('action'), $(".layui-form").serialize(),
				function(res) {
					layer.msg(res.message);
					if (res.code == 1) {
						setTimeout("location.href='/admin/customermanage/customerInfo/index'", 500);

					}
				}, "json");

			return false;
		});
		form.on('select(province)', function(data){
			if(data.value != ""){
				  $.ajax({
		              type: "get",
		              url: '/common/area/query',
		              async:false,//同步提交。不设置则默认异步，异步的话，最后执行ajax
		              data: {
		            	  parentId: data.value,
		              },
		              success: function(result) {
		            	  $("select[name='cityId']").val("");
		            	  $("select[name='areaId']").val("");
		            	  //$("#areaId").val(data.value);
		            	  var options="<option value="+">请选择<option>"
		            	  for(var i=0;i<result.length;i++){
		            		  options +="<option value="+result[i].value+">"+result[i].name+"<option>";
		            	  }
		            	  $("select[name='cityId']").html(options);
		            	  form.render();
		              }
		          });
			}
		});
		
		form.on('select(city)', function(data){
			if(data.value != ""){
				  $.ajax({
		              type: "get",
		              url: '/common/area/query',
		              async:false,//同步提交。不设置则默认异步，异步的话，最后执行ajax
		              data: {
		            	  parentId: data.value,
		              },
		              success: function(result) {
		            	  //$("#areaId").val(data.value);
		            	  var options="<option value="+">请选择<option>"
		            	  for(var i=0;i<result.length;i++){
		            		  options +="<option value="+result[i].value+">"+result[i].name+"<option>";
		            	  }
		            	  $("select[name='areaId']").html(options);
		            	  form.render();
		              }
		          });
			}
		});
		
		
		form.on('select(area)', function(data){
			if(data.value != ""){
		        //$("#areaId").val(data.value);
			}
		});
		//监听返回
		$('#backBtn').on('click', function(data) {
			location.href = "/admin/customermanage/customerInfo/index";
			return false;
		});

	});
</script>
<style>
	.theme-required .layui-form-label:before {
		display: inline-block;
		vertical-align: top;
		margin-right: 3px;
		width: 6px;
		height: 6px;
		border-radius: 50%;
		background-color: #c00;
		content: ''
	}

	.layui-inline {
		white-space: nowrap;
	}

	.sttl {
		font-size: 14px;
		color: #000;
		font-weight: 600;
		margin-bottom: 5px;
	}
</style>
#end
