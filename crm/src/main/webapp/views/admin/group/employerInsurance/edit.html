#@layout() #define main()
<div class="headerttl">修改雇主保单</div>
<div class='layui-tab-item layui-show'>
	<form class="layui-tab-content layui-form layui-form1" action="/admin/groupInsurance/saveBaseInfo">
		<input name='groupInsuranceOrder.id' style="display: none;" value="#(groupInsuranceOrder.id)">
		<div class=" wrap">
			<div class="overflow">
				<div class="half fl">
					<div class='layui-form-item'>
						<div class='layui-block'>
							<div class='layui-form-label fl'>保单号</div>
							<div class='layui-input-block overflow'>
								<input name='groupInsuranceOrder.policy_num' value='#(groupInsuranceOrder.policy_num)' class='layui-input' autocomplete='off' placeholder='请输入' />
							</div>
						</div>
					</div>
				</div>
				<div class="half fl">
					<div class='layui-form-item'>
						<div class='layui-block'>
							<div class='layui-form-label fl'>险种</div>
							<div class='layui-input-block '>
								<select name='groupInsuranceOrder.insurance_type' lay-verify='required' id="insuranceType" lay-search
								 lay-verify>
									<option value='0' selected="selected">雇主责任险</option>
								</select>
							</div>
						</div>
					</div>
				</div>
				<div class="half fl">
					<div class="layui-form-item">
						<div class='layui-block theme-required'>
							<div class='layui-form-label fl'>客户</div>
							<div class='layui-input-block'>
								<select name='groupInsuranceOrder.insure_customer_id' lay-verify='required' id="insureCustomerId" lay-search
								 lay-verify>
									<option value=''>请选择</option>
									#for(customer:customers)
									<option value='#(customer.id)' #if(groupInsuranceOrder.insure_customer_id==customer.id)selected #end>#(customer.customer_name)</option>
									#end
								</select>
							</div>
						</div>
					</div>
				</div>
				<div class="half fl">
					<div class="layui-form-item">
						<div class='layui-block theme-required'>
							<div class='layui-form-label fl'>保险机构</div>
							<div class='layui-input-block'>
								<select name='groupInsuranceOrder.brand_id' id="brandId" lay-verify='required' lay-search lay-verify>
									<option value=''>请选择</option>
									#for(brand:brands)
									<option value='#(brand.id)' #if(groupInsuranceOrder.brand_id==brand.id)selected #end>#(brand.name )</option>
									#end
								</select>
							</div>
						</div>
					</div>
				</div>
				<div class="half fl">
					<div class='layui-form-item'>
						<div class='layui-block theme-required'>
							<div class='layui-form-label fl'>总人数</div>
							<div class='layui-input-block overflow'>
								<input name='groupInsuranceOrder.total_person_sum' lay-verify='required' value='#(groupInsuranceOrder.total_person_sum)' class='layui-input' autocomplete='off' placeholder='请输入' />
							</div>
						</div>
					</div>
				</div>
				<div class="half fl">
					<div class='layui-form-item'>
						<div class='layui-block'>
							<div class='layui-form-label fl'>首次投保人数</div>
							<div class='layui-input-block overflow'>
								<input name='groupInsuranceOrder.person_num'  value='#(groupInsuranceOrder.person_num)' class='layui-input' autocomplete='off' placeholder='请输入' />
							</div>
						</div>
					</div>
				</div>
				<div class="half fl">
					<div class='layui-form-item'>
						<div class='layui-block theme-required'>
							<div class='layui-form-label fl'>身故赔偿限额</div>
							<div class='layui-input-block overflow'>
								<input name='groupInsuranceOrder.death_compensation' lay-verify='required' value='#(groupInsuranceOrder.death_compensation)' class='layui-input' autocomplete='off' placeholder='请输入' />
							</div>
						</div>
					</div>
				</div>
				<div class="half fl">
					<div class='layui-form-item'>
						<div class='layui-block theme-required'>
							<div class='layui-form-label fl'>残疾赔偿限额</div>
							<div class='layui-input-block overflow'>
								<input name='groupInsuranceOrder.disability_compensation' lay-verify='required' value='#(groupInsuranceOrder.disability_compensation)' class='layui-input' autocomplete='off' placeholder='请输入' />
							</div>
						</div>
					</div>
				</div>
				<div class="half fl">
					<div class='layui-form-item'>
						<div class='layui-block theme-required'>
							<div class='layui-form-label fl'>医疗补偿限额</div>
							<div class='layui-input-block overflow'>
								<input name='groupInsuranceOrder.medical_compensation' lay-verify='required' value='#(groupInsuranceOrder.medical_compensation)' class='layui-input' autocomplete='off' placeholder='请输入' />
							</div>
						</div>
					</div>
				</div>
				<div class="half fl">
					<div class='layui-form-item'>
						<div class='layui-block theme-required'>
							<div class='layui-form-label fl'>住院津贴赔偿限额</div>
							<div class='layui-input-block overflow'>
								<input name='groupInsuranceOrder.hospitalization_compensation' lay-verify='required' value='#(groupInsuranceOrder.hospitalization_compensation)' class='layui-input' autocomplete='off' placeholder='请输入' />
							</div>
						</div>
					</div>
				</div>
				<div class="half fl">
					<div class='layui-form-item'>
						<div class='layui-block theme-required'>
							<div class='layui-form-label fl'>误工赔偿限额</div>
							<div class='layui-input-block overflow'>
								<input name='groupInsuranceOrder.tardy_job_compensation' value='#(groupInsuranceOrder.tardy_job_compensation)' lay-verify='required' class='layui-input' autocomplete='off' placeholder='请输入' />
							</div>
						</div>
					</div>
				</div>
				<div class="half fl">
					<div class='layui-form-item'>
						<div class='layui-block theme-required'>
							<div class='layui-form-label fl'>法律费用赔偿限额</div>
							<div class='layui-input-block overflow'>
								<input name='groupInsuranceOrder.law_compensation' value='#(groupInsuranceOrder.law_compensation)' lay-verify='required' class='layui-input' autocomplete='off' placeholder='请输入' />
							</div>
						</div>
					</div>
				</div>
				<div class="half fl">
					<div class='layui-form-item'>
						<div class='layui-block'>
							<div class='layui-form-label fl'>免赔额</div>
							<div class='layui-input-block overflow'>
								<input name='groupInsuranceOrder.deductibles' value='#(groupInsuranceOrder.deductibles)' class='layui-input' autocomplete='off' placeholder='请输入' />
							</div>
						</div>
					</div>
				</div>
				<div class="half fl">
					<div class='layui-form-item'>
						<div class='layui-block theme-required'>
							<div class='layui-form-label fl'>每人年保费</div>
							<div class='layui-input-block overflow'>
								<input name='groupInsuranceOrder.annual_premium' value='#(groupInsuranceOrder.annual_premium)' lay-verify='required' class='layui-input' autocomplete='off'
								 placeholder='请输入' />
							</div>
						</div>
					</div>
				</div>
				<div class="half fl">
					<div class='layui-form-item'>
						<div class='layui-block theme-required'>
							<div class='layui-form-label fl'>保险起期</div>
							<div class='layui-input-block overflow'>
								<input type="text" class="form-control layui-input" value='#(groupInsuranceOrder.policy_effective_date)' lay-verify='required' name="groupInsuranceOrder.policy_effective_date"
								 id="policy_effective_date">
							</div>
						</div>
					</div>
				</div>
				<div class="half fl">
					<div class='layui-form-item'>
						<div class='layui-block theme-required'>
							<div class='layui-form-label fl'>保险止期</div>
							<div class='layui-input-block overflow'>
								<input type="text" class="form-control layui-input" value='#(groupInsuranceOrder.policy_expiration_date)' lay-verify='required' name="groupInsuranceOrder.policy_expiration_date"
								 id="policy_expiration_date">
							</div>
						</div>
					</div>
				</div>
				<div class="half fl">
                    <div class='layui-form-item'>
                        <div class='layui-block'>
                            <div class='layui-form-label fl'>经纪费比例</div>
                            <div class='layui-input-block overflow'>
                                <input type="text" class="form-control layui-input" value='#(groupInsuranceOrder.brokerage_charges)' lay-verify='required' name="groupInsuranceOrder.brokerage_charges"
                                 id="brokerage_charges">
                            </div>
                        </div>
                    </div>
                </div>
                  <div class="half fl">
                <div class='layui-form-item' style="display: inline-block;">
					<div class='layui-inline '>
						<div class='layui-form-label'>追溯日期</div>
						<div class='layui-input-inline'>
							<input type="text" class="form-control layui-input" value='#(groupInsuranceOrder.max_review_time)' name="groupInsuranceOrder.max_review_time">
						</div>
					</div>
				</div>
				</div>
			</div>
			<div>
				<div class="layui-form-item">
					<div class='layui-block theme-required'>
						<div class='layui-form-label fl'>特别约定</div>
						<div class='layui-input-block'>
							<div id="editor1">#(groupInsuranceOrder.special_agreement)
							</div>
							<textarea id="editorTextarea1" name='groupInsuranceOrder.special_agreement' style="display:none;"></textarea>
						</div>
					</div>
				</div>
			</div>
			<div>
				<div class="layui-form-item">
					<div class='layui-block theme-required'>
						<div class='layui-form-label fl'>附加条款</div>
						<div class='layui-input-block overflow'>
							<div id="editor2">#(groupInsuranceOrder.additional_clauses)
							</div>
							<textarea id="editorTextarea2" name='groupInsuranceOrder.additional_clauses' style="display:none;"></textarea>
						</div>
					</div>
				</div>
			</div>
			<div>
				<div class="layui-form-item">
					<div class='layui-block theme-required'>
						<div class='layui-form-label fl'>备注</div>
						<div class='layui-input-block overflow'>
							<div id="editor3">#(groupInsuranceOrder.remark)
							</div>
							<textarea id="editorTextarea3" name='groupInsuranceOrder.remark' style="display:none;"></textarea>
						</div>
					</div>
				</div>
			</div>
			<div>
				<div class="layui-form-item">
					<div class='layui-block theme-required'>
						<div class='layui-form-label fl'>通知邮箱</div>
						<div class='layui-input-block overflow'>
							<input name='groupInsuranceOrder.brand_service_emial' value='#(groupInsuranceOrder.brand_service_emial)' class='layui-input' autocomplete='off' placeholder='请输入' />
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="layui-form-item" style="text-align: center;">
			<button class="layui-btn" lay-submit lay-filter="submit1">保存</button>
			<a class="layui-btn layui-btn-primary" href='/admin/employerInsurance'>返回</a>
		</div>
	</form>
</div>
<style>
	.cover{
			position: fixed;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			z-index: 999;
			background-color: rgba(0,0,0,0.3)
		}
		.yzr_dialog{
			width: 660px;
			position: fixed;
			z-index: 99999;
			top: 50%;
			left: 50%;
			transform: translate3d(-50%,-50%,0)
		}
		.cover .title{
		padding: 0 80px 0 20px;
		height: 42px;
		line-height: 42px;
		border-bottom: 1px solid #eee;
		font-size: 14px;
		color: #333;
		overflow: hidden;
		background-color: #F8F8F8;
		border-radius: 2px 2px 0 0;
		}
		.cover .content{
		background-color: #fff;
		text-align: center
		}
		.cover .btns{
			text-align: right;
			padding: 0 15px 12px;
			user-select: none;
			-webkit-user-select: none;
			background: #fff;
		}
		.cover .btns .a{
		display: inline-block;
		height: 28px;
		line-height: 28px;
		margin: 5px 5px 0;
		border: 1px solid #1E9FFF;
		background-color: #1e9fff;
		color: #fff;
		border-radius: 2px;
		font-weight: 400;
		cursor: pointer;
		text-decoration: none;
		min-width: 48px;
		text-align: center;
		}
		.cover .btns .c{
		display: inline-block;
		height: 28px;
		line-height: 28px;
		margin: 5px 5px 0;
		border: 1px solid #dedede;
		background-color: #fff;
		color: #333;
		border-radius: 2px;
		font-weight: 400;
		cursor: pointer;
		text-decoration: none;
		min-width: 48px;
		text-align: center;
		}
		
		</style>
<script type="text/javascript">
	function wangedit(id) {
		var E = window.wangEditor
		var editor = new E('#editor' + id)
		//或者 var editor = new E( document.getElementById('editor') )
		editor.customConfig.uploadFileName = 'file';
		editor.customConfig.uploadImgMaxSize = 2 * 800 * 800;
		editor.customConfig.uploadImgMaxLength = 4;
		editor.customConfig.uploadImgServer = '/common/file/wangUpload' // 上传图片到服务器
		editor.customConfig.uploadImgHooks = {
			customInsert: function(insertImg, result, editor) {
				// 图片上传并返回结果，自定义插入图片的事件（而不是编辑器自动插入图片！！！）
				// insertImg 是插入图片的函数，editor 是编辑器对象，result 是服务器端返回的结果
				// 举例：假如上传图片成功后，服务器端返回的是 {url:'....'} 这种格式，即可这样插入图片：
				var url = result.data.src;
				insertImg(url);
				// result 必须是一个 JSON 格式字符串！！！否则报错
			}
		}
		editor.customConfig.onchange = function(html) {
			// 监控变化，同步更新到 textarea
			$('#editorTextarea' + id).val(html)
		}
		editor.create()
		$('#editorTextarea' + id).val(editor.txt.html())
	}



	for (var i = 1; i < 4; i++) {
		wangedit(i);
	}

	var form;
	var laydate;
	layui.use(['table', 'element', 'form', 'laydate', 'layedit', 'upload'],
		function() {
			var table = layui.table
			laydate = layui.laydate;
			var element = layui.element;
			form = layui.form;
			var layedit = layui.layedit,
				$ = layui.$;
			laydate.render({
				elem: '#policy_effective_date' //指定元素
					,
				format: 'yyyy-MM-dd',
				trigger: 'click'
			});

			laydate.render({
				elem: '#policy_expiration_date' //指定元素
					,
				format: 'yyyy-MM-dd',
				trigger: 'click'
			});

			form.on('submit(submit1)',
				function(data) {
					$.post($(".layui-form1").attr('action'), $(".layui-form1").serialize(),
						function(res) {
							layer.msg(res.msg);
							if (res.code == 1) {
								location.href = "/admin/employerInsurance";
							}
						}, "json");

					return false;
				})
	})

</script>
<style>
	.layui-form-label {
		white-space: nowrap;
		width: 93px
	}

	.layui-tab-content {
		padding: 20px 10px 10px 0
	}

	.layui-form-item .layui-inline {
		margin-bottom: 0
	}

	/*
			.theme-required .layui-form-label:before{position: absolute;display: block;width: 5px;height:5px;border-radius: 50%;top:50%;left:0px;transform:translate3d(0,-50%,0);background-color: #c00;content:''}
			*/
	.theme-required .layui-form-label:before {
		display: inline-block;
		vertical-align: top;
		margin-right: 3px;
		width: 6px;
		height: 6px;
		border-radius: 50%;
		background-color: #c00;
		content: ''
	}

	.layui-elem-quote .layui-form-item:last-of-type {
		margin-bottom: 0
	}

	.w-e-toolbar {
		background-color: #009688 !important;
	}

	.w-e-toolbar .w-e-menu i {
		color: #fff;
	}

	.half {
		width: 50%;
		padding: 0 15px;
		box-sizing: border-box;
	}

	.fl {
		float: left;
	}

	.overflow {
		overflow: hidden;
	}

	.wrap {
		padding: 15px;
		overflow: hidden;
	}

	@media (max-width: 800px) {
		.half {
			width: 100%;
		}
	}
</style>
#end